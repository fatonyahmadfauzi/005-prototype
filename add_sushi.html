<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pendaftaran Menu Sushi</title>
    <link rel="stylesheet" href="library/css/bootstrap.min.css">
    <link rel="stylesheet" href="library/css/material.ui.min.css">

    <!-- Splide CSS -->
    <link rel="stylesheet" href="library/css/splide.min.css">
    <style>
        .my-slider-progress {
            background: #ccc;
        }
        
        .my-slider-progress-bar {
            background: greenyellow;
            height: 2px;
            transition: width 400ms ease;
            width: 0;
        }
    </style>
</head>
<body>

    <!-- Bagian Navbar -->
    <nav class="navbar navbar-expand-md navbar-dark bg-dark">
        <div class="container"> <!-- Tambahkan kelas container di sini -->
            <a class="navbar-brand" href="#">
                <img src="gambar/LOGO_FAF - White.png" alt="" style="height: 35px;">
            </a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ml-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="katalog_sushi">Katalog Sushi</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="list_sushi">List Sushi</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="add_sushi">Add Sushi</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="edit_sushi">Edit Sushi</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
    <!-- End Navbar -->

    <!-- Bagian Header Jumbootron Dengan Splide -->
    <header class="container mt-3">
        <div class="row justify-content-center">
            <div class="col-md"> <!-- Adjust the column width as needed -->
                <div class="splide">
                    <div class="splide__track">
                        <ul class="splide__list">
                            <li class="splide__slide">
                                <div class="jumbotron text-center">
                                    <h1>Welcome to Our Website</h1>
                                    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p>
                                    <a href="#" class="btn btn-primary">Learn More</a>
                                </div>
                            </li>
                            <li class="splide__slide">
                                <div class="jumbotron text-center">
                                    <h1>Welcome to Our Website</h1>
                                    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p>
                                    <a href="#" class="btn btn-primary">Learn More</a>
                                </div>
                            </li>
                            <li class="splide__slide">
                                <div class="jumbotron text-center">
                                    <h1>Welcome to Our Website</h1>
                                    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p>
                                    <a href="#" class="btn btn-primary">Learn More</a>
                                </div>
                            </li>
                        </ul>
                    </div>
                    
                    <!-- Add the progress bar element -->
                    <div class="my-slider-progress">
                        <div class="my-slider-progress-bar"></div>
                    </div>
                </div>
            </div>
        </div>
    </header>
    <!-- End Header Jumbotron Dengan Splide -->

    <!-- Bagian Input Data Sushi -->
    <main class="container mt-1">
        <!-- Form for input data -->
        <section class="row justify-content-center">
            <div class="col-md">
                <div class="my-2 p-5 form-input bg-light rounded">
                    <div class="form-container">
                        <form id="sushiForm">
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="form-group mb-3">
                                        <label class="label-with-colon" for="nama">Nama</label>
                                        <input type="text" class="form-control" id="nama" name="nama" placeholder="Nama Sushi" required>
                                    </div>
                                    <div class="form-group mb-3">
                                        <label class="label-with-colon4" for="harga_sushi">Harga</label>
                                        <input type="number" class="form-control" id="harga_sushi" name="harga_sushi" placeholder="Harga" required>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group mb-3">
                                        <label class="label-with-colon4" for="quantity_sushi">Qty</label>
                                        <input type="number" class="form-control" id="quantity_sushi" name="quantity_sushi" placeholder="Qty" required>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-6">
                                    <button type="submit" class="btn btn-primary">Submit</button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
                <!-- Alert Success -->
                <div id="successAlertSushi" class="alert alert-success mt-3" role="alert" style="display: none;">
                    Data berhasil disimpan!
                </div>
            </div>
        </section>
    </main>
    <!-- End Input Data Sushi -->

    <!-- Bagian Input Paket Menu & Tambahan -->
    <main class="container mt-1">
        <!-- Form for input data -->
        <section class="row justify-content-center">
            <div class="col-md">
                <div class="my-2 p-5 form-input bg-light rounded">
                    <div class="form-container">
                        <form id="tambahanForm">
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="form-group mb-3">
                                        <label class="label-with-colon3">Paket Menu</label>
                                        <div class="form-check">
                                            <input id="Standar" class="form-check-input" type="checkbox" name="paketmenu" value="Standar">
                                            <label class="form-check-label" for="Standar">Standar</label>
                                        </div>
                                        <div class="form-check">
                                            <input id="VIP" class="form-check-input" type="checkbox" name="paketmenu" value="VIP">
                                            <label class="form-check-label" for="VIP">VIP</label>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group mb-3">
                                        <label class="label-with-colon3">Tambahan</label>
                                        <div class="form-check">
                                            <input id="Saus Shoyu" class="form-check-input" type="checkbox" name="tambahan" value="Saus Shoyu">
                                            <label class="form-check-label" for="Saus Shoyu">Saus Shoyu</label>
                                        </div>
                                        <div class="form-check">
                                            <input id="Wasabi" class="form-check-input" type="checkbox" name="tambahan" value="Wasabi">
                                            <label class="form-check-label" for="Wasabi">Wasabi</label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-6">
                                    <button type="submit" class="btn btn-primary">Submit</button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
                <!-- Alert Success -->
                <div id="successAlertTambahan" class="alert alert-success mt-3" role="alert" style="display: none;">
                    Paket menu berhasil ditambahkan!
                </div>
            </div>
        </section>
    </main>
    <!-- End Input Paket Menu & Tambahan -->

    <!-- Bagian Input Data Paket Menu & Tambahan -->
    <main class="container mt-1" id="tambahanSection">
        <!-- Form for input data -->
        <section class="row justify-content-center">
            <div class="col-md">
                <div class="my-2 p-5 form-input bg-light rounded">
                    <div class="form-container">
                        <form id="tambahanDataForm">
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="form-group mb-3">
                                        <label class="label-with-colon" for="tambahanDropdown">Tambahan</label>
                                        <select class="form-control" id="tambahanDropdown" name="tambahan">
                                            <option value="">Pilih Tambahan</option>
                                        </select>
                                    </div>
                                    <div class="form-group mb-3">
                                        <label class="label-with-colon4" for="harga_tambahan">Harga</label>
                                        <input type="number" class="form-control" id="harga_tambahan" name="harga_tambahan" placeholder="Harga" required>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group mb-3">
                                        <label class="label-with-colon4" for="quantity_tambahan">Qty</label>
                                        <input type="number" class="form-control" id="quantity_tambahan" name="quantity_tambahan" placeholder="Qty" required>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-6">
                                    <button type="submit" class="btn btn-primary">Submit</button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
                <!-- Alert Success -->
                <div id="successAlertDataTambahan" class="alert alert-success mt-3" role="alert" style="display: none;">
                    Data berhasil disimpan!
                </div>
            </div>
        </section>
    </main>
    <!-- End Input Data Paket Menu & Tambahan -->

    <!-- Fetch API Footer -->
    <div id="footer"></div>

    <!-- Bagian Copyright -->
    <div class="container mt-5">
        <div class="row justify-content-center">
            <div class="col-md-6 text-center">
                <p>FATONY AHMAD FAUZI Â© <span id="year"></span></p>
            </div>
        </div>
    </div>
    <!-- End Copyright -->

    <script src="library/js/jquery-3.6.0.min.js"></script>
    <script src="library/js/bootstrap.min.js"></script>

    <!-- Script Navbar -->
    <script>
        document.addEventListener("DOMContentLoaded", function() {
        // Mengambil nama halaman dari URL
        var currentLocation = window.location.pathname.split("/").pop();

        // Menghapus kelas "active" dari semua elemen navbar
        var navItems = document.querySelectorAll(".navbar-nav .nav-item");
        navItems.forEach(function(item) {
            item.classList.remove("active");
        });

        // Menambahkan kelas "active" ke elemen navbar yang sesuai dengan halaman saat ini
        navItems.forEach(function(item) {
            var link = item.querySelector(".nav-link");
            if (link.getAttribute("href") === currentLocation) {
            item.classList.add("active");
            }
        });
        });
    </script>
    <!-- End Script Navbar -->

    <!-- Splide JS -->
    <script src="library/js/splide.min.js"></script>
    <script>
        var splide = new Splide('.splide', {
            type: 'loop', // Enables infinite loop
            autoplay: true, // Enables auto-scrolling
            interval: 3000, // Sets the interval between slides in milliseconds
        });
        var bar = splide.root.querySelector('.my-slider-progress-bar');
        
        // Updates the bar width whenever the carousel moves:
        splide.on('mounted move', function () {
            var end = splide.Components.Controller.getEnd() + 1;
            var rate = Math.min((splide.index + 1) / end, 1);
            bar.style.width = String(100 * rate) + '%';
        });
        
        splide.mount();
    </script>
    <!-- End Splide JS -->

    <!-- Script Input Data Sushi -->
    <script>
        // Mengambil referensi form dan input fields
        const formSushi = document.getElementById('sushiForm');
        const namaInput = document.getElementById('nama');
        const hargaInput = document.getElementById('harga_sushi');
        const qtyInput = document.getElementById('quantity_sushi');

        const successAlertSushi = document.getElementById('successAlertSushi');

        function showSuccessAlert(alertElement) {
            alertElement.style.display = 'block';
            alertElement.classList.add('fade-in');

            setTimeout(() => {
                alertElement.style.display = 'none';
                alertElement.classList.remove('fade-in');
            }, 3000); // Hide after 3 seconds
        }

        // Menambahkan event listener pada form
        formSushi.addEventListener('submit', function(event) {
            event.preventDefault(); // Mencegah pengiriman form

            // Mendapatkan nilai dari input fields
            const nama = namaInput.value;
            const harga = parseFloat(hargaInput.value);
            const qty = parseInt(qtyInput.value);

            // Menggunakan objek untuk menyimpan data
            const sushiData = {
                nama: nama,
                harga: harga,
                qty: qty
            };

            // Mengambil data yang sudah ada dalam localStorage
            const existingData = localStorage.getItem('sushiData');

            // Jika sudah ada data sebelumnya, mengubahnya menjadi array dan menambahkan data baru
            let sushiArray = [];
            if (existingData) {
                sushiArray = JSON.parse(existingData);
            }
            sushiArray.push(sushiData);

            // Menyimpan data baru ke dalam localStorage
            localStorage.setItem('sushiData', JSON.stringify(sushiArray));

            // Mengosongkan input fields setelah penyimpanan
            namaInput.value = '';
            hargaInput.value = '';
            qtyInput.value = '';

            // Menampilkan data yang sudah disimpan dalam console log
            console.log('Data sushi yang sudah disimpan:', sushiArray);
            showSuccessAlert(successAlertSushi);
        });
    </script>
    <!-- End Script Input Data Sushi -->

    <!-- Script Input Paket Menu & Tambahan -->
    <script>
        // Define the formTambahan variable
        const formTambahan = document.getElementById('tambahanForm');
        const successAlertTambahan = document.getElementById('successAlertTambahan');

        // Mendapatkan data dari localStorage
        const selectedPaketMenu = JSON.parse(localStorage.getItem('paketMenu')) || [];
        const selectedTambahan = JSON.parse(localStorage.getItem('tambahan')) || [];

        // Mengatur status centang pada checkbox sesuai dengan data yang ada dalam localStorage
        document.addEventListener('DOMContentLoaded', function() {
            selectedPaketMenu.forEach(function(id) {
                const checkbox = document.getElementById(id);
                if (checkbox) {
                    checkbox.checked = true;
                }
            });

            selectedTambahan.forEach(function(id) {
                const checkbox = document.getElementById(id);
                if (checkbox) {
                    checkbox.checked = true;
                }
            });

            // Cek apakah ada data dalam localStorage
            if (selectedPaketMenu.length === 0 && selectedTambahan.length === 0) {
                // Jika tidak ada data, sembunyikan elemen <main>
                const tambahanSection = document.getElementById('tambahanSection');
                if (tambahanSection) {
                    tambahanSection.style.display = 'none';
                }
            } else {
                // Jika ada data, tampilkan elemen <main>
                const tambahanSection = document.getElementById('tambahanSection');
                if (tambahanSection) {
                    tambahanSection.style.display = 'block';
                }
            }
        });

        formTambahan.addEventListener('submit', function(event) {
            event.preventDefault(); // Prevent form submission

            // Get selected IDs
            const selectedPaketMenu = Array.from(document.querySelectorAll('input[name="paketmenu"]:checked')).map(checkbox => checkbox.id);
            const selectedTambahan = Array.from(document.querySelectorAll('input[name="tambahan"]:checked')).map(checkbox => checkbox.id);

            // Get input values
            const selectedTambahanDropdown = document.getElementById('tambahanDropdown');
            const hargaTambahanInput = document.getElementById('harga_tambahan');
            const quantityTambahanInput = document.getElementById('quantity_tambahan');

            const tambahanData = {
                id: selectedTambahanDropdown.value,
                harga: parseFloat(hargaTambahanInput.value),
                quantity: parseInt(quantityTambahanInput.value)
            };

            // Store IDs and tambahan data in localStorage
            localStorage.setItem('paketMenu', JSON.stringify(selectedPaketMenu));
            localStorage.setItem('tambahan', JSON.stringify(selectedTambahan));
            localStorage.setItem('tambahanData', JSON.stringify(tambahanData));

            // Show success alert and reset form
            showSuccessAlert(successAlertTambahan);

            // Log tambahanData to console for debugging
            console.log('tambahanData:', tambahanData);
        });
    </script>
    <!-- End Script Input Paket Menu & Tambahan -->

    <!-- Script Input Data Paket Menu & Tambahan -->
    <script>
        const successAlertDataTambahan = document.getElementById('successAlertDataTambahan');

        document.addEventListener('DOMContentLoaded', function() {
            const tambahanDropdown = document.getElementById('tambahanDropdown');
            const hargaTambahanInput = document.getElementById('harga_tambahan');
            const quantityTambahanInput = document.getElementById('quantity_tambahan');

            // Load data from localStorage
            const tambahanData = JSON.parse(localStorage.getItem('tambahan'));
            if (tambahanData) {
                tambahanData.forEach(function(item) {
                    const option = document.createElement('option');
                    option.value = item;
                    option.text = item;
                    tambahanDropdown.appendChild(option);
                });
            }

            // Add event listener for tambahanDropdown change
            tambahanDropdown.addEventListener('change', function() {
                const selectedTambahan = tambahanDropdown.value;
                if (selectedTambahan) {
                    const harga = hargaTambahanInput.value;
                    const quantity = quantityTambahanInput.value;

                    const data = {
                        tambahan: selectedTambahan,
                        harga: harga,
                        quantity: quantity
                    };

                    // Save data to localStorage
                    localStorage.setItem('selectedTambahanData', JSON.stringify(data));
                    
                    // Log the selected data
                    console.log('Selected Data:', data);
                }
            });

            const form = document.getElementById('tambahanDataForm');
            form.addEventListener('submit', function(event) {
                event.preventDefault();
                // Lakukan sesuatu dengan data yang diinputkan, misalnya mengirimkan data ke server
                
                // Log the form submission
                console.log('Form submitted:', event);
            });

            // Show success alert and reset form
            showSuccessAlert(successAlertDataTambahan);
        });
    </script>
    <!-- End Script Input Data Paket Menu & Tambahan -->

    <!-- Script Fetch API -->
    <script>
        fetch('template/footer.html')
            .then(response => response.text())
            .then(data => {
                document.querySelector('#footer').innerHTML = data;
        });
    </script>

    <script>
        // Script untuk generate tahun otomatis dalam copyright
        document.getElementById("year").innerHTML = new Date().getFullYear();
    </script>

    <script src="library/js/jquery-3.5.1.slim.min.js"></script>
    <script src="library/js/popper.min.js"></script>
    <script src="library/js/bootstrap.min.js"></script>
</body>
</html>
